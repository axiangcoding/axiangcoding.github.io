(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"013f":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"row"},[a("q-space"),a("q-card",{staticClass:"q-my-xl shadow-6 my-card"},[a("q-card-section",{staticClass:"bg-primary text-white"},[a("div",{staticClass:"text-h6"},[t._v("欢迎登录！")])]),a("q-form",{on:{submit:t.onSubmit,reset:t.onReset}},[a("q-card-section",[a("q-input",{staticClass:"q-mb-lg",attrs:{color:"blue",filled:"",label:"用户名","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"请输入用户名"},function(t){return t.length>4&&t.length<16||"4 - 16个字符"}]},model:{value:t.data.loginName,callback:function(e){t.$set(t.data,"loginName",e)},expression:"data.loginName"}}),a("q-input",{attrs:{color:"blue",filled:"",type:t.isPwd?"password":"text",label:"密码",rules:[function(t){return null!==t&&""!==t||"请输入密码"},function(t){return t.length>4&&t.length<16||"4 - 16个字符"}]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.data.loginPwd,callback:function(e){t.$set(t.data,"loginPwd",e)},expression:"data.loginPwd"}}),a("q-checkbox",{attrs:{label:"记住密码（请确保是本人的电脑）"},model:{value:t.rememberPwd,callback:function(e){t.rememberPwd=e},expression:"rememberPwd"}})],1),a("q-card-actions",{attrs:{align:"around"}},[a("q-btn",{attrs:{glossy:"",type:"reset",color:"secondary",size:"lg",flat:""}},[t._v("重 置")]),a("q-btn",{attrs:{glossy:"",loading:t.btnLoading,type:"submit",color:"primary",size:"lg"}},[t._v("登 录")])],1),a("div",{staticClass:"row justify-between"},[a("q-btn",{staticClass:"col-4",attrs:{size:"md",flat:"",color:"red"}},[t._v("忘记密码？")]),a("q-btn",{staticClass:"col-4",attrs:{size:"md",flat:"",color:"red",to:"/register"}},[t._v("没有账号？注册一个")])],1)],1)],1),a("q-space")],1)},s=[],i=a("967e"),n=a.n(i),r=(a("96cf"),a("fa84")),l=a.n(r),c={data:function(){return{data:{loginName:"",loginPwd:""},rememberPwd:!1,isPwd:!0,btnLoading:!1}},mounted:function(){console.log(this.rememberPwd),this.rememberPwd=this.$q.cookies.has("rememberPwd")?this.$q.cookies.get("rememberPwd"):this.rememberPwd,this.data.loginName=this.$q.cookies.has("loginName")?this.$q.cookies.get("loginName"):this.data.loginName,this.data.loginPwd=this.$q.cookies.has("loginPwd")?this.$q.cookies.get("loginPwd"):this.data.loginPwd},methods:{onSubmit:function(){this.btnLoading=!0,this.$q.cookies.set("rememberPwd",this.rememberPwd),this.rememberPwd?(this.$q.cookies.set("loginName",this.data.loginName),this.$q.cookies.set("loginPwd",this.data.loginPwd)):(this.$q.cookies.remove("loginName"),this.$q.cookies.remove("loginPwd")),this.doLogin()},onReset:function(){this.data.loginName="",this.data.loginPwd="",this.rememberPwd=!1},doRegister:function(){},doLogin:function(){var t=this;return l()(n.a.mark((function e(){var a,o;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new URLSearchParams({username:t.data.loginName,password:t.data.loginPwd}),e.next=3,t.$axios.post("/user/login",a).catch((function(){t.btnLoading=!1}));case 3:o=e.sent,1e4===o.code&&(t.$store.commit("global/setIsLogin",!0),t.$store.commit("global/setUsername",o.datas[0]),t.$store.commit("global/setToken",o.datas[1]),t.$store.commit("global/setPrivateInfo",o.datas[2]),t.$router.push({name:"index"}),t.$q.notify({message:"登录成功",caption:"欢迎回来",color:"positive",icon:"done",timeout:2e3})),t.btnLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}}},d=c,m=(a("3108"),a("2877")),u=a("eebe"),g=a.n(u),b=a("99899"),h=a("2c91"),w=a("f09f"),f=a("a370"),p=a("0378"),P=a("27f9"),q=a("0016"),k=a("8f8e"),v=a("4b7e"),$=a("9c40"),y=Object(m["a"])(d,o,s,!1,null,"59644a29",null);e["default"]=y.exports;g()(y,"components",{QPage:b["a"],QSpace:h["a"],QCard:w["a"],QCardSection:f["a"],QForm:p["a"],QInput:P["a"],QIcon:q["a"],QCheckbox:k["a"],QCardActions:v["a"],QBtn:$["a"]})},3108:function(t,e,a){"use strict";var o=a("3396"),s=a.n(o);s.a},3396:function(t,e,a){}}]);