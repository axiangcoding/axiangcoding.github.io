(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"2c87":function(a,e,t){"use strict";var n=t("f2a4"),r=t.n(n);r.a},"56b4":function(a,e,t){"use strict";t.r(e);var n=function(){var a=this,e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[n("q-banner",{staticClass:"row text-white bg-positive"},[e._v("欢迎注册一码当先账号，拥有账号可以体验更多内容哦。内测时期注册的账号将获得特有称号（称号系统上线时）")]),n("div",{staticClass:"row"},[n("q-space",{staticClass:"col"}),n("q-card",{staticClass:"col-5 q-my-md my-card shadow-6"},[n("q-card-section",{staticClass:"bg-primary text-white"},[n("div",{staticClass:"text-h6"},[e._v("注册账号")])]),n("q-form",{on:{submit:function(a){return e.onSubmit()},reset:function(a){return e.onReset()}}},[n("q-card-section",[n("q-input",{attrs:{color:"blue",filled:"",clearable:"",label:"用户名",placeholder:"用户名是登录的唯一方式","lazy-rules":"",rules:[function(a){return null!==a&&""!==a||"用户名不能为空"},function(a){return a.length>3&&a.length<17||"4 - 16个字符"},function(a){return/^\w+$/.test(a)||"请输入数字、字母或者下划线"}]},model:{value:e.data.username,callback:function(a){e.$set(e.data,"username",a)},expression:"data.username"}}),n("q-input",{attrs:{color:"blue",filled:"",clearable:"",type:"password",label:"密码",placeholder:"密码最好复杂点",rules:[function(a){return null!==a&&""!==a||"密码不能为空"},function(a){return a.length>4&&a.length<16||"4 - 16个字符"},function(a){return/^\w+$/.test(a)||"请输入数字、字母或者下划线"}]},model:{value:e.data.password,callback:function(a){e.$set(e.data,"password",a)},expression:"data.password"}}),n("q-input",{attrs:{color:"blue",filled:"",clearable:"",type:"password",label:"确认密码",rules:[function(a){return null!==a&&""!==a||"请确认密码"},function(e){return e===a.data.password||"两次输入的密码不一致"}]},model:{value:e.data.checkPassword,callback:function(a){e.$set(e.data,"checkPassword",a)},expression:"data.checkPassword"}}),n("q-input",{attrs:{color:"blue",filled:"",clearable:"",label:"昵称",placeholder:"昵称让你变得高端","lazy-rules":"",rules:[function(a){return null!==a&&""!==a||"昵称不能为空"},function(a){return a.length>0&&a.length<9||"1 - 8个字符"}]},model:{value:e.data.nickname,callback:function(a){e.$set(e.data,"nickname",a)},expression:"data.nickname"}}),n("q-btn-toggle",{staticClass:"q-mb-md",attrs:{"toggle-color":"primary",options:[{label:"保密",value:"0"},{label:"男",value:"1"},{label:"女",value:"2"}]},model:{value:e.data.gender,callback:function(a){e.$set(e.data,"gender",a)},expression:"data.gender"}}),n("q-input",{attrs:{color:"blue",clearable:"",filled:"",label:"邮箱",placeholder:"邮箱是找回密码的唯一方式","lazy-rules":"",rules:[function(a){return null!==a&&""!==a||"邮箱不能为空"},function(a){return/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(a)||"你肯定是瞎填的"}]},model:{value:e.data.email,callback:function(a){e.$set(e.data,"email",a)},expression:"data.email"}}),n("q-input",{attrs:{color:"blue",clearable:"",filled:"",label:"联系方式",placeholder:"填个电话，万一搞活动中奖了呢","lazy-rules":"",rules:[function(a){return null!==a&&""!==a||"联系方式不能为空"},function(a){return/^(13[0-9]{9})|(15[0-9][0-9]{8})|(18[0-9][0-9]{8})$/.test(a)||"这么奇怪的数字肯定不是手机号"}]},model:{value:e.data.phone,callback:function(a){e.$set(e.data,"phone",a)},expression:"data.phone"}}),n("q-input",{attrs:{autogrow:"",color:"blue",clearable:"",filled:"",label:"个人宣言",placeholder:"随便说两句，让大家知道你是谁，不说也行"},model:{value:e.data.motto,callback:function(a){e.$set(e.data,"motto",a)},expression:"data.motto"}}),n("AvatarUploader",{staticClass:"q-my-md",attrs:{doUpload:e.doUpload},on:{returnUrl:e.getAvatarUrl}})],1),n("q-card-actions",{attrs:{align:"around"}},[n("q-btn",{attrs:{glossy:"",type:"reset",color:"secondary",size:"lg"}},[e._v("重置内容")]),n("q-btn",{attrs:{glossy:"",loading:e.btnLoading,type:"submit",color:"primary",size:"lg"}},[e._v("注册账号")])],1)],1)],1),n("q-space",{staticClass:"col"})],1)],1)},r=[],l=t("967e"),o=t.n(l),s=(t("96cf"),t("fa84")),c=t.n(s),i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"avatar-body"},[t("span",[a._v("上传头像图片必须在 2M 以内，只能是 JPG 格式或者 PNG 格式!")]),t("el-upload",{ref:"upload",staticClass:"col avatar-uploader",attrs:{"auto-upload":!1,"show-file-list":!1,"list-type":"picture","on-change":a.handleAvatarChange,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload}},[a.imageUrl?t("img",{staticClass:"col avatar-uploader",attrs:{src:a.imageUrl}}):t("q-icon",{staticClass:"col q-mx-xl q-my-xl",attrs:{size:"25px",name:"cloud_upload"}})],1),a.imageUrl?t("q-btn",{staticClass:"col q-mt-sm",attrs:{rounded:"",color:"negative"},on:{click:a.clearAvatar}},[a._v("清空图片")]):a._e()],1)},d=[],u={data:function(){return{file:"",imageUrl:""}},props:{doUpload:Boolean},watch:{doUpload:function(a){a&&this.uploadAvatar()}},methods:{clearAvatar:function(){this.imageUrl=""},handleAvatarChange:function(a,e){this.file=a.raw,this.imageUrl=URL.createObjectURL(a.raw)},handleAvatarSuccess:function(a,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(a){var e="image/jpeg"===a.type,t="image/png"===a.type,n=a.size/1024/1024<2;return e||t||this.$message.error("上传头像图片只能是 JPG 格式或者 PNG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&n},uploadAvatar:function(){var a=this;return c()(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.file){e.next=10;break}return t=new FormData,t.append("avatar",a.file),e.next=5,a.$axios.post("/upload/avatar",t);case 5:n=e.sent,a.imageUrl="https://api.fjutcoder.com/cf/image/avatar/"+n.datas[0],a.$emit("returnUrl",a.imageUrl),e.next=11;break;case 10:a.$emit("returnUrl","");case 11:case"end":return e.stop()}}),e)})))()}}},p=u,m=(t("2c87"),t("2877")),f=t("eebe"),h=t.n(f),b=t("0016"),g=t("9c40"),v=Object(m["a"])(p,i,d,!1,null,"c8331312",null),w=v.exports;h()(v,"components",{QIcon:b["a"],QBtn:g["a"]});var U={components:{AvatarUploader:w},data:function(){return{data:{username:"",password:"",checkPassword:"",nickname:"",gender:"",email:"",phone:"",motto:"",avatarUrl:""},btnLoading:!1,doUpload:!1,uploadCompleted:!1,uploadAvatarUrl:"https://api.fjutcoder.com/cf/upload/avatar"}},watch:{uploadCompleted:function(a){a&&this.doRegister()}},methods:{onSubmit:function(){this.btnLoading=!0,!1===this.doUpload?this.doUpload=!0:this.doRegister()},onReset:function(){this.data={username:"",password:"",checkPassword:"",nickname:"",gender:"",email:"",phone:"",motto:"",avatarUrl:""}},getAvatarUrl:function(a){this.data.avatarUrl=a,this.uploadCompleted=!0},doRegister:function(){var a=this;return c()(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new URLSearchParams,t.append("username",a.data.username),t.append("password",a.data.password),t.append("nickname",a.data.nickname),t.append("gender",a.data.gender),t.append("email",a.data.email),t.append("phone",a.data.phone),t.append("motto",a.data.motto),t.append("avatarUrl",a.data.avatarUrl),e.next=11,a.$axios.post("/user/register",t).catch((function(){a.btnLoading=!1}));case 11:n=e.sent,1e4===n.code&&(a.$q.notify({message:"账号注册成功！",caption:"现在快登录一下吧！",icon:"check",color:"positive"}),a.$router.push({name:"index"})),a.btnLoading=!1;case 14:case"end":return e.stop()}}),e)})))()}}},k=U,q=(t("9099"),t("99899")),x=t("54e1"),y=t("2c91"),C=t("f09f"),$=t("a370"),A=t("0378"),z=t("27f9"),_=t("6a67"),Q=t("4b7e"),P=Object(m["a"])(k,n,r,!1,null,"320748dd",null);e["default"]=P.exports;h()(P,"components",{QPage:q["a"],QBanner:x["a"],QSpace:y["a"],QCard:C["a"],QCardSection:$["a"],QForm:A["a"],QInput:z["a"],QBtnToggle:_["a"],QCardActions:Q["a"],QBtn:g["a"]})},9099:function(a,e,t){"use strict";var n=t("abcc"),r=t.n(n);r.a},abcc:function(a,e,t){},f2a4:function(a,e,t){}}]);